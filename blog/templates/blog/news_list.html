{% extends 'base.html' %}

{% block title %}
    {{ page_title }} | {{ block.super }}
{% endblock %}


{% block body %}
    <main id="tm-main">
        <!--  -->
        <div id="blog" class="uk-section-default uk-section">
            <div class="uk-container">
                <div class="uk-grid tm-grid-expand uk-child-width-1-1 uk-grid-margin">
                    <div class="uk-width-1-1">
                        <h1> {{ page_header }} </h1>
                    </div>
                </div>
                <div class="uk-grid tm-grid-expand uk-grid-margin" uk-grid>
                    <div class="uk-width-2-3@m uk-flex-first@m">
                        <div class="uk-margin">
                            <div class="uk-grid 
                            uk-child-width-1-1 
                            uk-child-width-1-2@m 
                            uk-grid-column-medium 
                            uk-grid-match"
                                 uk-grid>
                            
                                {% if object_list %}
                                    {% for item in object_list %}
                                        <div class="uk-grid-margin">
                                            <div class="el-item uk-grid-item-match">
                                                <a class="uk-card uk-card-default uk-card-small 
                                                uk-card-hover uk-margin-remove-first-child uk-link-toggle uk-display-block"
                                                   href="{% url 'blog:news_detail' pk=item.pk %}">
                                                    <div class="uk-card-media-top"><img decoding="async"
                                                                                        src="
                                                                                                {% if item.photo %}{{ item.photo.url }}{% else %}{{ page_default_img }}{% endif %}"
                                                                                        class="el-image"
                                                                                        alt="{{ item.title }}"
                                                                                        loading="lazy" >
                                                    </div>
                                                    <div class="uk-card-body uk-margin-remove-first-child">
                                                        <h3 class="el-title uk-card-title uk-margin-top uk-margin-remove-bottom">
                                                            <span class="uk-link-heading">{{ item.title }}</span></h3>
                                                        <div class="el-meta uk-text-meta uk-margin-top">
                                                            {{ item.created_by }} |
                                                            {{ item.category.title }} | 
                                                            {{ item.created_at }}
                                                            
                                                        </div>
                                                        <div class="el-content uk-panel uk-margin-top">
                                                            {{ item.short_content|truncatechars:77 }}
                                                        </div>
                                                    </div>
                                                </a>
                                            </div>
                                        </div>
                                    {% endfor %}
                                {% else %}
                                    <h2>Новостей пока нет</h2>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <div class="uk-width-1-3@m uk-flex-first@s">
                        <ul class="uk-list uk-list-striped">
                            <li class="el-item">
                                <a href="#" uk-scroll class="uk-link-toggle">
                                    <div class="uk-grid-small uk-child-width-expand uk-flex-nowrap uk-flex-middle"
                                         uk-grid>
                                        <div class="uk-width-auto uk-link"><span class="el-image"
                                                                                 uk-icon="icon: thumbnails;"></span>
                                        </div>
                                        <div>
                                            <div class="el-content uk-panel uk-h5"><span
                                                    class="uk-link uk-margin-remove-last-child">Все публикации</span>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li class="el-item">
                                <a href="#" uk-scroll class="uk-link-toggle">
                                    <div class="uk-grid-small uk-child-width-expand uk-flex-nowrap uk-flex-middle"
                                         uk-grid>
                                        <div class="uk-width-auto uk-link"><span class="el-image"
                                                                                 uk-icon="icon: star;"></span></div>
                                        <div>
                                            <div class="el-content uk-panel uk-h5"><span
                                                    class="uk-link uk-margin-remove-last-child">Популярное</span></div>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li class="el-item">
                                <a href="#" uk-scroll class="uk-link-toggle">
                                    <div class="uk-grid-small uk-child-width-expand uk-flex-nowrap uk-flex-middle"
                                         uk-grid>
                                        <div class="uk-width-auto uk-link"><span class="el-image"
                                                                                 uk-icon="icon: rss;"></span></div>
                                        <div>
                                            <div class="el-content uk-panel uk-h5"><span
                                                    class="uk-link uk-margin-remove-last-child">Новости и обновления</span>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li class="el-item">
                                <a href="#" uk-scroll class="uk-link-toggle">
                                    <div class="uk-grid-small uk-child-width-expand uk-flex-nowrap uk-flex-middle"
                                         uk-grid>
                                        <div class="uk-width-auto uk-link"><span class="el-image"
                                                                                 uk-icon="icon: eye;"></span></div>
                                        <div>
                                            <div class="el-content uk-panel uk-h5"><span
                                                    class="uk-link uk-margin-remove-last-child">Случайное</span></div>
                                        </div>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </main>
{% endblock %}